import * as React from 'react';
import { Viewer } from '@react-pdf-viewer/core';
import { toolbarPlugin } from '@react-pdf-viewer/toolbar';
import type { ToolbarSlot, TransformToolbarSlot } from '@react-pdf-viewer/toolbar';

import '@react-pdf-viewer/core/lib/styles/index.css';
import '@react-pdf-viewer/toolbar/lib/styles/index.css';

interface CustomToolbarProps {
   fileUrl: string;
}

const CustomToolbar: React.FC<CustomToolbarProps> = ({ fileUrl }) => {
   const toolbarPluginInstance = toolbarPlugin();
   const { renderDefaultToolbar, Toolbar } = toolbarPluginInstance;

   const transform: TransformToolbarSlot = (slot: ToolbarSlot) => {
      const { NumberOfPages } = slot;
      return Object.assign({}, slot, {
         NumberOfPages: () => (
            <>
               of <NumberOfPages />
            </>
         ),
         Open: () => <></>,
         SwitchTheme: () => <></>,
         GoToPreviousPage: () => <></>,
         GoToNextPage: () => <></>,
      });
   };

   return (
      <div
         className="rpv-core__viewer"
         style={{
            border: '1px solid rgba(0, 0, 0, 0.3)',
            display: 'flex',
            flexDirection: 'column',
            height: '100%',
         }}
      >
         <div
            style={{
               alignItems: 'center',
               backgroundColor: '#eeeeee',
               borderBottom: '1px solid rgba(0, 0, 0, 0.1)',
               display: 'flex',
               padding: '4px',
            }}
         >
            <Toolbar>{renderDefaultToolbar(transform)}</Toolbar>
         </div>
         <div
            style={{
               flex: 1,
               overflow: 'hidden',
            }}
         >
            <Viewer fileUrl={fileUrl} plugins={[toolbarPluginInstance]} />
         </div>
      </div>
   );
};

export default CustomToolbar;